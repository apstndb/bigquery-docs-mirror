# Manage notebooks

This document describes how to manage [Colab Enterprise notebooks in BigQuery](/bigquery/docs/notebooks-introduction) , including how to view, compare, restore, and delete notebooks.

This document also describes how to view and manage notebook metadata in [Dataplex Universal Catalog](/dataplex/docs/introduction) .

Notebooks are [BigQuery Studio](/bigquery/docs/query-overview#bigquery-studio) code assets powered by [Dataform](/dataform/docs/overview) .

## Before you begin

1.  [Create a notebook](/bigquery/docs/create-notebooks) .
2.  To manage notebook metadata in Dataplex Universal Catalog, ensure that the [Dataplex API](/dataplex/docs/enable-api) is enabled in your Google Cloud project.

### Required permissions

To share notebooks, you need the following Identity and Access Management (IAM) roles:

  - [BigQuery Job User ( `  roles/bigquery.jobUser  ` )](/bigquery/docs/access-control#bigquery.jobUser)
  - [BigQuery Read Session User ( `  roles/bigquery.readSessionUser  ` )](/bigquery/docs/access-control#bigquery.readSessionUser)
  - [Code Owner ( `  roles/dataform.codeOwner  ` )](/dataform/docs/access-control#dataform.codeOwner) at the resource level.

To save and delete notebooks, you need the following IAM roles:

  - [BigQuery Job User ( `  roles/bigquery.jobUser  ` )](/bigquery/docs/access-control#bigquery.jobUser)
  - [BigQuery Read Session User ( `  roles/bigquery.readSessionUser  ` )](/bigquery/docs/access-control#bigquery.readSessionUser)
  - [Code Owner ( `  roles/dataform.codeOwner  ` )](/dataform/docs/access-control#dataform.codeOwner) or [Code Editor ( `  roles/dataform.codeEditor  ` )](/dataform/docs/access-control#dataform.codeEditor)

To work with notebook revisions, you need the following IAM roles:

  - [BigQuery Job User ( `  roles/bigquery.jobUser  ` )](/bigquery/docs/access-control#bigquery.jobUser)

  - [BigQuery Read Session User ( `  roles/bigquery.readSessionUser  ` )](/bigquery/docs/access-control#bigquery.readSessionUser)

  - Any one of the following roles:
    
      - [Code Owner ( `  roles/dataform.codeOwner  ` )](/dataform/docs/access-control#dataform.codeOwner)
      - [Code Editor ( `  roles/dataform.codeEditor  ` )](/dataform/docs/access-control#dataform.codeEditor)
      - [Code Viewer ( `  roles/dataform.codeViewer  ` )](/dataform/docs/access-control#dataform.codeViewer)

For more information about BigQuery IAM, see [Access control with IAM](/bigquery/docs/access-control) .

To manage notebook metadata in Dataplex Universal Catalog, ensure that you have the required [Dataplex Universal Catalog roles](/dataplex/docs/iam-roles) .

## Grant access to notebooks

To grant other users access to a notebook, add those users to an appropriate IAM role.

**Important:** Users who have access to the notebook can see all output generated by code in the notebook, even if this output contains data from tables they don't have access to. To prevent saved output from being shared, [disable notebook output saving](/bigquery/docs/create-notebooks#disable_output_saving) .

1.  In the Google Cloud console, go to the **BigQuery** page.

2.  In the left pane, click explore **Explorer** :
    
    If you don't see the left pane, click last\_page **Expand left pane** to open the pane.

3.  In the **Explorer** pane, expand your project and click **Notebooks** .

4.  Find the notebook that you want to grant access to.

5.  Click more\_vert **Open actions** next to the notebook, and then click **Share** .

6.  In the **Share permissions** pane, click **Add user/group** .

7.  In the **New principals** field, enter a principal.

8.  In the **Role** list, select one of the following roles:
    
      - [**Code Owner**](/dataform/docs/access-control#dataform.codeOwner) : Can perform any action on the notebook, including deleting or sharing it.
      - [**Code Editor**](/dataform/docs/access-control#dataform.codeEditor) : Can edit the notebook.
      - [**Code Viewer**](/dataform/docs/access-control#dataform.codeViewer) : Can view the notebook.
    
    **Note:** The principal must also have the [Notebook Runtime User ( `  roles/aiplatform.notebookRuntimeUser  ` )](/vertex-ai/docs/general/access-control#aiplatform.notebookRuntimeUser) and [BigQuery User ( `  roles/bigquery.user  ` )](/bigquery/docs/access-control#bigquery.user) roles to run the notebook.

9.  Optional: To view a complete list of roles and advanced sharing settings, click **Advanced sharing** .

10. Click **Save** .

11. To return to the notebook information page, click **Close** .

## Share notebooks

To share a notebook with other users, you can generate and share a link to the notebook. For other users to see the notebook you share, you must first [grant access](/bigquery/docs/create-notebooks#grant_access_to_notebooks) to the notebook.

To run a notebook, users must have access to the data that the notebook accesses. For more information, see [Grant access to a dataset](/bigquery/docs/control-access-to-resources-iam#grant_access_to_a_dataset) .

**Important:** Users who have access to the notebook can see all output generated by code in the notebook, even if this output contains data from tables they don't have access to. To prevent saved output from being shared, [disable notebook output saving](/bigquery/docs/create-notebooks#disable_output_saving) .

1.  In the Google Cloud console, go to the **BigQuery** page.

2.  In the left pane, click explore **Explorer** :
    
    If you don't see the left pane, click last\_page **Expand left pane** to open the pane.

3.  In the **Explorer** pane, expand your project and click **Notebooks** .

4.  Find the notebook that you want to share. You can use the search feature or filters to find your notebook.

5.  Click more\_vert **View actions** next to the notebook, and then click **Share** \> **Copy link** .

6.  Share the link with other users.

## View all notebooks

To view a list of all notebooks in your project, do the following:

1.  In the Google Cloud console, go to the **BigQuery** page.

2.  In the left pane, click explore **Explorer** :
    
    If you don't see the left pane, click last\_page **Expand left pane** to open the pane.

3.  In the **Explorer** pane, click more\_vert **View actions** next to **Notebooks** , and then do one of the following:

<!-- end list -->

  - To open the list in the current tab, click **Show all** .
  - To open the list in a new tab, click **Show all in** \> **New tab** .
  - To open the list in a split tab, click **Show all in** \> **Split tab** .

## View notebook metadata

To view notebook metadata, follow these steps:

1.  In the Google Cloud console, go to the **BigQuery** page.

2.  In the left pane, click explore **Explorer** :

3.  In the **Explorer** pane, expand your project and click **Notebooks** .

4.  Click the name of the notebook that you want to view metadata for.

5.  Look at the summary details to see information about the notebook such as the [region](/bigquery/docs/notebooks-introduction#supported_regions) it uses for data and the date it was last modified.

## Work with notebook versions

You can choose to create a notebook either inside of or outside of a [repository](/bigquery/docs/repository-intro) . Notebook versioning is handled differently based on where the notebook is located.

### Notebook versioning in repositories

Repositories are Git repositories that reside either in BigQuery or with a third-party provider. You can use [workspaces](/bigquery/docs/workspaces-intro) in repositories to perform version control on notebooks. For more information, see [Use version control with a file](/bigquery/docs/workspaces#use_version_control_with_a_file) .

### Notebook versioning outside of repositories

Use the following sections to learn how to view, compare, and restore versions of a notebook.

#### View notebook versions

To view notebook versions, follow these steps:

1.  In the Google Cloud console, go to the **BigQuery** page.

2.  In the left pane, click explore **Explorer** :

3.  In the **Explorer** pane, expand your project and click **Notebooks** . Click the name of the notebook you want to view version history for.

4.  To see a list of the notebook versions in descending order by date, click schedule **Version history** .

#### Compare notebook versions

To compare notebook versions, follow these steps:

1.  In the Google Cloud console, go to the **BigQuery** page.

2.  In the left pane, click explore **Explorer** :

3.  In the **Explorer** pane, expand your project and click **Notebooks** .

4.  Click the name of the notebook that you want to compare version information for.

5.  Click schedule **Version history** .

6.  Click more\_vert **View actions** next to a notebook version and then click **Compare** . The comparison pane opens, comparing the notebook version that you selected with the current notebook version.

7.  Optional: To compare the versions inline instead of in separate panes, click **Compare** and then click **Inline** .

8.  Optional: To compare the source code of versions, click **Compare** and then click **Show raw source** .

9.  Optional: To hide the command output in the notebook, click **Compare** and then deselect **Show output** .

#### Restore a notebook version

Restoring a notebook version from the comparison pane lets you compare the current and previous versions of the notebook before choosing to restore the previous version. Restoring a notebook creates a new version of a notebook instead of overwriting the current version. No version history is lost.

1.  In the Google Cloud console, go to the **BigQuery** page.

2.  In the left pane, click explore **Explorer** :

3.  In the **Explorer** pane, expand your project and click **Notebooks** .

4.  Click the name of the notebook that you want to restore a previous version of.

5.  Click schedule **Version history** .

6.  Click more\_vert **View actions** next to the version and then click **Compare** . The comparison pane opens, comparing the notebook version that you selected with the most recent notebook version.

7.  If you want to restore the previous notebook version after comparison, click **Restore** .

8.  Click **Confirm** .

## Download a notebook

To download a notebook, follow these steps:

1.  In the Google Cloud console, go to the **BigQuery** page.

2.  In the left pane, click explore **Explorer** :

3.  In the **Explorer** pane, expand your project and click **Notebooks** .

4.  Click the name of the notebook that you want to download. You can use the search feature or filters to find your notebook.

5.  Expand the menu bar and go to the **File** menu:

6.  Select **Download** , and then select the file type in which you want to download the file.

## Delete notebooks

To delete a notebook, follow these steps:

1.  In the Google Cloud console, go to the **BigQuery** page.

2.  In the left pane, click explore **Explorer** :

3.  In the **Explorer** pane, expand your project and click **Notebooks** .

4.  Find the notebook that you want to delete.

5.  Click more\_vert **View actions** next to the notebook and then click **Delete** .

6.  To confirm deletion, type `  delete  ` in the dialog.

7.  Click **Delete** .

## Manage metadata in Dataplex Universal Catalog

[Dataplex Universal Catalog](/dataplex/docs/introduction) lets you store and manage metadata for notebooks. Notebooks are available in Dataplex Universal Catalog by default, without additional configuration.

You can use Dataplex Universal Catalog to manage notebooks in all [BigQuery locations](/bigquery/docs/locations) . Managing notebooks in Dataplex Universal Catalog is subject to [Dataplex Universal Catalog quotas and limits](/dataplex/docs/quotas) and [Dataplex Universal Catalog pricing](https://cloud.google.com/dataplex/pricing) .

Dataplex Universal Catalog automatically retrieves the following metadata from notebooks:

  - Data asset name
  - Data asset parent
  - Data asset location
  - Data asset type
  - Corresponding Google Cloud project

Dataplex Universal Catalog logs notebooks as [entries](/dataplex/docs/ingest-custom-sources#entries) with the following entry values:

  - System entry group  
    The [system entry group](/dataplex/docs/ingest-custom-sources#entry-groups) for notebooks is `  @dataform  ` . To view details of notebook entries in Dataplex Universal Catalog, you need to view the `  dataform  ` system entry group. For instructions about how to view a list of all entries in an entry group, see [View details of an entry group](/dataplex/docs/ingest-custom-sources#entry-group-details) in the Dataplex Universal Catalog documentation.
  - System entry type  
    The [system entry type](/dataplex/docs/ingest-custom-sources#entry-types) for notebooks is `  dataform-code-asset  ` . To view details of notebooks, you need to view the `  dataform-code-asset  ` system entry type, filter the results with an aspect-based filter, and [set the `  type  ` field inside `  dataform-code-asset  ` aspect to `  NOTEBOOK  `](/dataplex/docs/search-syntax#aspect-search) . Then, select an entry of the selected notebook. For instructions about how to view details of a selected entry type, see [View details of an entry type](/dataplex/docs/ingest-custom-sources#entry-type-details) in the Dataplex Universal Catalog documentation. For instructions about how to view details of a selected entry, see [View details of an entry](/dataplex/docs/search-assets#view-entry-details) in the Dataplex Universal Catalog documentation.
  - System aspect type  
    The [system aspect type](/dataplex/docs/enrich-entries-metadata#aspect-types) for notebooks is `  dataform-code-asset  ` . To provide additional context to notebooks in Dataplex Universal Catalog by annotating notebook entries with [aspects](/dataplex/docs/enrich-entries-metadata#aspects) , view the `  dataform-code-asset  ` aspect type, filter the results with an aspect-based filter, and [set the `  type  ` field inside `  dataform-code-asset  ` aspect to `  NOTEBOOK  `](/dataplex/docs/search-syntax#aspect-search) . For instructions about how to annotate entries with aspects, see [Manage aspects and enrich metadata](/dataplex/docs/enrich-entries-metadata) in the Dataplex Universal Catalog documentation.
  - Type  
    The type for data canvases is `  NOTEBOOK  ` . This type lets you filter notebooks in the `  dataform-code-asset  ` system entry type and the `  dataform-code-asset  ` aspect type by using the `  aspect:dataplex-types.global.dataform-code-asset.type=NOTEBOOK  ` query in an [aspect-based filter](/dataplex/docs/search-syntax#aspect-search) .

For instructions about how to search for assets in Dataplex Universal Catalog, see [Search for data assets in Dataplex Universal Catalog](/dataplex/docs/search-assets) in the Dataplex Universal Catalog documentation.

## Troubleshooting

For more information, see [Troubleshoot Colab Enterprise](/colab/docs/troubleshooting) .

## What's next

  - Learn more about [Colab Enterprise notebooks in BigQuery](/bigquery/docs/notebooks-introduction) .
  - Learn how to [create notebooks](/bigquery/docs/create-notebooks) .
  - Learn how to [schedule notebooks](/bigquery/docs/orchestrate-notebooks) .
